syntax = "proto3";

package devcon;

// Message from agent to host to request port forwarding
message StartPortForward {
  uint32 port = 1;
}

// Message from agent to host to stop port forwarding
message StopPortForward {
  uint32 port = 1;
}

// Message from host to agent to open a URL in the browser
message OpenUrl {
  string url = 1;
}

// Message from host to agent requesting a new tunnel connection
message TunnelRequest {
  uint32 port = 1;
  uint32 tunnel_id = 2;
  uint32 data_port = 3;
}

// Wrapper message for all agent communication
message AgentMessage {
  oneof message {
    StartPortForward start_port_forward = 1;
    StopPortForward stop_port_forward = 2;
    OpenUrl open_url = 3;
    TunnelRequest tunnel_request = 4;
  }
}
